@model PagedList.IPagedList<LRC_NET_Framework.tb_MemberMaster>
@using PagedList.Mvc
@{
    ViewBag.Title = "School List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@ViewBag.CollegeName</h2>
<div style="font-size:smaller">
    @using (Html.BeginForm("MembersBySchool", "Home", FormMethod.Post, new { @class = "margin-right: 0" }))
    {
        @Html.Hidden("CollegeID", (int)ViewBag.CollegeID)
        <div class="form-group row list-inline">
            <div class="col-md-2">
                <div class="input-group">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="submit">
                            <i class="glyphicon glyphicon-search"></i>
                        </button>
                    </span>
                    @Html.TextBox("SearchString", null, new { @class = "form-control", placeholder = "Search" })
                </div>
            </div>
        </div>
        <div class="row ex1">
            <div class="col-md-2 align-text-top">Showing @Model.FirstItemOnPage - @Model.Count()&nbsp;&nbsp;of&nbsp;&nbsp;@ViewData["MemberQty"]</div>
            <div class="col-md-3 align-text-top"></div>
            <div class="col-md-7"></div>
        </div>
        <div class="ex1">
            <table class="table table-bordered table-sm">
                @foreach (var item in Model)
                {
                <tr style="background-color:gainsboro;">
                    <td>
                        <div class="row h6">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-3" style="border-bottom-left-radius:10px; border-top-left-radius:10px; font-weight:bold; height:25px; padding-right:0; padding-bottom:3px; padding-top:7px; text-align:right; background:lavender;">
                                        Faculty&nbsp;Member:
                                    </div>
                                    <div class="col-md-9 text-muted" style="overflow:hidden; padding-left:3px; height:25px; font-weight:bold; background:lavender">
                                        <div style="width: 100%;">
                                            <div style="float: left; padding-bottom:3px; padding-top:7px; ">
                                                @Html.ActionLink(item.LastName + ", " + item.FirstName, "Edit", "Home", new { id = item.MemberID, CollegeID = ViewBag.CollegeID }, new { @class = "text -info" })
                                            </div>
                                            <div style="float: left; margin-left:20px; padding-bottom:6px; padding-top:4px;">
                                                <a href="@Url.Action("AddPersonAssessmentActivity", "Assessment", new { @id = item.MemberID })" class="btn-sm btn-link"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a>
                                            </div>
                                            <div style="float: left; margin-left:20px; padding-bottom:3px; padding-top:7px;">
                                                Phone:
                                            </div>
                                            <div style="float: left; margin-left:3px; padding-bottom:3px; padding-top:7px;">
                                                @if (item.tb_MemberPhoneNumbers.Count > 0)
                                                {
                                                    @Html.ActionLink(item.tb_MemberPhoneNumbers.FirstOrDefault().PhoneNumber, "ManageContactInfo", "Home", new { id = item.MemberID, CollegeID = ViewBag.CollegeID }, new { @class = "text -info" })
                                                }
                                                else
                                                {
                                                    @Html.ActionLink("Add Pnone", "ManageContactInfo", "Home", new { id = item.MemberID, CollegeID = ViewBag.CollegeID }, new { @class = "text -info" })
                                                }
                                            </div>
                                        </div>                                        
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row ex1 h6">

                            <div class="col-md-3 row" style="padding-bottom:5px">
                                <div class="col-md-4" style="font-weight:bold; text-align:right; padding-right:0;">
                                    Home School:
                                </div>
                                <div class="col-md-8 text-muted" style="padding-left:5px;">
                                    @Html.DisplayFor(modelItem => item.tb_Department.tb_College.CollegeName)
                                </div>
                            </div>

                            <div class="col-md-2 row" style="padding-bottom:5px">
                                <div class="col-md-5" style="font-weight:bold; text-align:right; padding-right:0;">
                                    Category:
                                </div>
                                <div class="col-md-7 text-muted" style="padding-left:5px;">
                                    @Html.DisplayFor(modelItem => item.tb_Categories.CategoryName)
                                </div>
                            </div>

                            <div class="col-md-3 row" style="padding-bottom:5px">
                                <div class="col-md-4" style="font-weight:bold; text-align:right; padding-right:0;">
                                    Department:
                                </div>
                                <div class="col-md-8 text-muted" style="padding-left:5px;">
                                    @Html.DisplayFor(modelItem => item.tb_Department.DepartmentName)
                                </div>
                            </div>

                            <div class="col-md-2 row" style="padding-bottom:5px">
                                <div class="col-md-10" style="font-weight:bold; text-align:right; padding-right:0;">
                                    Membership&nbsp;Commitment:
                                </div>
                                <div class="col-md-2 text-muted" style="padding-left:5px;">
                                    @Html.DisplayFor(modelItem => item.tb_MemberActivity.Where(t => t.MemberID == item.MemberID).LastOrDefault().MembershipCommitment)
                                </div>
                            </div>

                            <div class="col-md-2 row" style="padding-bottom:5px">
                                <div class="col-md-7" style="font-weight:bold; text-align:right; padding-right:0;">
                                    Membership:
                                </div>
                                <div class="col-md-5 text-muted" style="padding-left:5px;">
                                    @Html.DisplayFor(modelItem => item.tb_MemberActivity.Where(t => t.MemberID == item.MemberID).LastOrDefault().tb_ActivityStatus.ActivityStatusName)
                                </div>
                            </div>

                        </div>
                    </td>
                </tr>
                    <tr>
                        <td colspan="7">
                            <table class="table table-sm">
                                <tr>
                                    <th style="background-color:gainsboro;">
                                        <i>Campus</i>
                                    </th>
                                    <th style="background-color:gainsboro;">
                                        <i>Building</i>
                                    </th>
                                    <th style="background-color:gainsboro;">
                                        <i>Room</i>
                                    </th>
                                    <th style="background-color:gainsboro;">
                                        <i>Note</i>
                                    </th>
                                    <th style="background-color:gainsboro;">
                                        <i>Class</i>
                                    </th>

                                    <th style="background-color:gainsboro;">
                                        <i>Start</i>
                                    </th>
                                    <th style="background-color:gainsboro;">
                                        <i>End</i>
                                    </th>
                                    <th style="background-color:gainsboro;">
                                        <i>Days</i>
                                    </th>
                                </tr>
                                @foreach (var record in item.tb_SemesterTaught)
                                {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => record.tb_Building.tb_Campus.CampusName)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => record.tb_Building.BuildingName)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => record.Room)
                                    </td>
                                    <td>???</td>
                                    <td>
                                        @Html.DisplayFor(modelItem => record.Class)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => record.ClassStart)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => record.ClassEnd)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => record.tb_WeekDay.WeekDayName)
                                    </td>
                                </tr>
                                }
                            </table>
                        </td>
                    </tr>
                }
            </table>
            <br />
            Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) from @Model.PageCount

            @Html.PagedListPager(Model, page => Url.Action("MembersBySchool", new { page, CollegeID = ViewBag.CollegeID, searchString = ViewBag.Search }))
        </div>
    }
</div>

